{"version":3,"sources":["../../js/bow.js"],"names":[],"mappings":"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","file":"bow.js","sourcesContent":["var bow = {};\n\nbow.request = {\n    res: null,\n    token: null,\n    make: function(url, data, headers) {\n        this.res = {\n            url: null,\n            method: 'GET',\n            headers: {},\n            data: {},\n            complete: null,\n            success: null,\n            error: null,\n            format: 'html',\n            response: null\n        };\n        if (typeof(url) !== 'undefined') {\n            this.setUrl(url);\n        }\n        if (typeof(data) !== 'undefined') {\n            this.setData(data);\n        }\n        if (typeof(headers) !== 'undefined') {\n            this.setHeaders(headers);\n        }\n        return this;\n    },\n    setFormat: function(format) {\n        this.res.format = format;\n        return this;\n    },\n    getFormat: function() {\n        return this.res.format;\n    },\n    setMethod: function(method) {\n        if (typeof (method) === 'undefined') {\n            method = 'GET';\n        }\n        this.res.method = method;\n        return this;\n    },\n    getMethod: function() {\n        return this.res.method;\n    },\n    setUrl: function(url) {\n        this.res.url = url;\n        return this;\n    },\n    getUrl: function() {\n        return this.res.url;\n    },\n    addHeader: function(name, value) {\n        this.res.headers[name] = value;\n        return this;\n    },\n    removeHeader: function(name) {\n        this.res.headers[name] = null;\n        return this;\n    },\n    hasHeader: function(name) {\n        return typeof(this.res.headers[name]) !== 'undefined';\n    },\n    setHeaders: function(headers, merge) {\n        if (typeof (merge) === 'undefined') {\n            merge = false;\n        }\n        if (merge) {\n            this.res.headers = $.extend(this.res.headers, headers);\n        } else {\n            this.res.headers = headers;\n        }\n        return this;\n    },\n    removeHeaders: function() {\n        this.res.headers = {};\n        return this;\n    },\n    setData: function(data) {\n        this.res.data = data;\n        return this;\n    },\n    getData: function() {\n        return this.res.data;\n    },\n    setResponse: function(response) {\n        this.res.response = response;\n    },\n    getResponse: function() {\n        return this.res.response;\n    },\n    getJsonResponse: function() {\n        return $.parseJSON(this.res.response.responseText);\n    },\n    onComplete: function(complete) {\n        this.res.complete = complete;\n        return this;\n    },\n    onSuccess: function(success) {\n        this.res.success = success;\n        return this;\n    },\n    onError: function(error) {\n        this.res.error = error;\n        return this;\n    },\n    post: function() {\n        if (typeof(this.res.data) === 'undefined' || this.res.data === null) {\n            this.res.data = {};\n        }\n        if (typeof(this.res.data['_token']) === 'undefined') {\n            this.res.data['_token'] = this.token;\n        }\n        this.setMethod('POST');\n        return this.send();\n    },\n    send: function() {\n        var self = this;\n\n        if (!self.hasHeader('Application-Context')) {\n            self.addHeader('Application-Context', 'ajax');\n        }\n\n        $.ajax({\n            url: self.getUrl(),\n            beforeSend: function(request) {\n                if (typeof(self.res.headers) === 'object') {\n                    $.each(self.res.headers, function(k, v) {\n                        request.setRequestHeader(k, v);\n                    });\n                }\n            },\n            type: self.getMethod(),\n            data: self.getData(),\n            dataType: self.getFormat(),\n            success: function(a, b, c) {\n                self.res.response = c;\n                if (self.res.success) {\n                    if (self.getResponse().getResponseHeader('Content-Type') === 'application/json') {\n                        a = '';\n                    }\n                    self.res.success(a, b, c);\n                }\n                if (c.getResponseHeader('__callback__')) {\n                    eval(c.getResponseHeader('__callback__'));\n                }\n                bow.ready.run();\n            },\n            error: function(a, b, c) {\n                if (self.res.error) {\n                    self.res.error(a, b, c);\n                }\n            },\n            complete: function(a, b) {\n                if (self.res.complete) {\n                    self.res.complete(a, b);\n                }\n            }\n        });\n    },\n\n    run: function(e) {\n        var href = $(e).attr('data-href');\n        if (typeof(href) === 'undefined') {\n            return false;\n        }\n\n        var data = {};\n        var headers = {};\n        var matches;\n        $(e).each(function () {\n            $.each(this.attributes, function () {\n                // this.attributes is not a plain object, but an array\n                // of attribute nodes, which contain both the name and value\n                if (this.specified) {\n                    matches = this.name.match(/^data-value-(.*)$/i);\n                    if (matches && matches.length === 2) {\n                        data[matches[1]] = this.value;\n                        return;\n                    }\n\n                    matches = this.name.match(/^data-header-(.*)$/i);\n                    if (matches && matches.length === 2) {\n                        headers[matches[1]] = this.value;\n                        return;\n                    }\n                }\n            });\n        });\n\n        var req = bow.request.make(href, data, headers);\n        req.onComplete(function() {\n            // just reload page\n            window.location = window.location.href;\n        });\n        var method = $(e).attr('data-method');\n        if (typeof(method) !== 'undefined' && method === 'POST') {\n            req.post();\n        } else {\n            req.send();\n        }\n    }\n};\n\nbow.form = {\n    getInputs: function(form) {\n        var inputs = $(form).find(':input');\n        var data = {};\n        var name;\n        $.each(inputs, function(i, input) {\n            if (typeof ($(input).attr('name')) !== 'undefined') {\n                name = $(input).attr('name');\n                if (typeof(data[name]) !== 'undefined') {\n                    if (typeof(data[name]) === 'object') {\n                        data[name].push($(input).val());\n                    } else {\n                        data[name] = [data[name], $(input).val()];\n                    }\n                } else {\n                    data[name] = $(input).val();\n                }\n            }\n        });\n        return data;\n    }\n};\n\nbow.modal = {\n    queue: [],\n    container: {\n        id: null,\n        res: {\n            title: null,\n            body: null,\n            loading: null,\n            footer: null\n        },\n        ready: function() {\n            this.res.title = this.title();\n            this.res.body = this.body();\n            this.res.loading = this.id.find('.modal-loading');\n            this.res.footer = this.footer();\n        },\n        body: function(content) {\n            if (typeof (content) !== 'undefined') {\n                this.body().html(content);\n            }\n            return this.id.find('.modal-body');\n        },\n        title: function(content) {\n            if (typeof (content) !== 'undefined') {\n                this.title().html(content);\n            }\n            return this.id.find('.modal-title');\n        },\n        footer: function(content) {\n            if (typeof (content) !== 'undefined') {\n                this.footer().html(content);\n            }\n            return this.id.find('.modal-footer');\n        },\n        bind: function() {\n            var self = bow.modal;\n            this.body().find('form').submit(function() {\n                self.submit();\n                return false;\n            });\n            this.id.find('.btn-save').click(function() {\n                self.submit();\n                return false;\n            });\n        },\n        unbind: function() {\n            this.body().find('form').unbind('submit');\n            this.id.find('.btn-save').unbind('click');\n        }\n    },\n    ready: function() {\n        var self = this;\n        self.container.id = $('#mainModal');\n        self.reset();\n        self.container.id.modal({\n            show: false\n        });\n        self.container.ready();\n        self.bind();\n    },\n    bind: function() {\n        var self = this;\n        self.container.id.on('hidden.bs.modal', function(e) {\n            self.queue = [];\n            self.reset();\n        });\n        self.container.id.on('request.completed', function(e) {\n            self.container.id.removeAttr('data-progress');\n        });\n        $('[data-toggle=\"bow\"]').click(function() {\n            self.open(this);\n        });\n    },\n    on: function(event, callback) {\n        if (this.container.id === null) {\n            return false;\n        }\n        this.container.id.on(event, callback);\n    },\n    open: function(element) {\n        var self = this;\n        self.queue.push(element);\n        var url = $(element).attr('data-href');\n        if (url !== '') {\n            if (typeof (self.container.id.attr('data-progress')) !== 'undefined') {\n                return false;\n            }\n            self.container.id.attr('data-progress', 1);\n\n            if (typeof ($(element).attr('data-size')) !== 'undefined') {\n                self.container.id.find('.modal-dialog')\n                    .addClass($(element).attr('data-size'));\n            }\n            if (typeof ($(element).attr('data-class')) !== 'undefined') {\n                self.container.id.find('.modal-dialog')\n                    .addClass($(element).attr('data-class'));\n            }\n            if (typeof ($(element).attr('data-style')) !== 'undefined') {\n                self.container.id.find('.modal-dialog')\n                    .css($(element).attr('data-style'));\n            }\n            if (typeof ($(element).attr('data-btn-save')) !== 'undefined') {\n                self.container.id.find('.btn-save')\n                    .text($(element).attr('data-btn-save'));\n            }\n            self.load(element);\n        }\n    },\n    reset: function() { // @TODO: Reset modal's content\n        this.container.id.html($('#frmGlobalModal').html());\n        this.container.unbind();\n        this.container.bind();\n    },\n    loading: function(show) { // @TODO: control the loading HTML\n        var self = this;\n        show = typeof (show) === 'undefined' ? true : false;\n        if (show) {\n            self.container.id.modal('show');\n            self.container.footer().hide();\n            self.container.body(self.container.id.find('.modal-loading').html());\n        } else {\n            self.container.footer().show();\n            self.container.body('');\n            return false;\n        }\n\n        // Add trigger on request complete\n        bow.ready.add(function() {\n            // allow to extend the modal's footer\n            var extendModalFooter = self.container.body().find('.extend-modal-footer');\n            if (extendModalFooter.length) {\n                self.container.footer().find('.modal-footer-extra').html(extendModalFooter.html());\n                extendModalFooter.remove();\n                self.container.id.trigger('modal.footer.extended');\n            }\n\n            // even to replace footer itself\n            var replaceModalFooter = self.container.body().find('.replace-modal-footer');\n            if (replaceModalFooter.length) {\n                self.container.footer().html(replaceModalFooter.html());\n                replaceModalFooter.remove();\n                self.container.id.trigger('modal.footer.replaced');\n            }\n\n            // or customize the title itself\n            var replaceModalTitle = self.container.body().find('.replace-modal-title');\n            if (replaceModalTitle.length) {\n                self.container.title(replaceModalTitle.html());\n                replaceModalTitle.remove();\n                self.container.id.trigger('modal.title.replaced');\n            }\n\n            if (bow.utils.isPluginLoaded('validator')) {\n                // Validation Binding\n                self.container.body().find('form')\n                    .validator()\n                    .on('invalid.bs.validator', function(e) {\n                        $(e.relatedTarget).parent().addClass('has-error');\n                        // http://html5pattern.com/\n                    })\n                    .on('valid.bs.validator', function(e) {\n                        $(e.relatedTarget).parent().removeClass('has-error');\n                    });\n            }\n\n            self.container.id.trigger('modal.ready');\n        });\n    },\n    load: function(e) { // @TODO: load HTML content of provided url\n        var self = this;\n\n        self.loading();\n        if (typeof ($(e).attr('data-title')) !== 'undefined') {\n            self.container.title($(e).attr('data-title'));\n        }\n\n        var url = $(e).attr('data-href');\n        var req = bow.request.make(url, {}, {'Application-Context': 'modal'})\n            .onSuccess(function(content) {\n                self.loading(false);\n                if (content !== '') {\n                    self.container.body(content);\n                    self.container.bind();\n                }\n                self.container.id.trigger('request.completed');\n            });\n        if (typeof($(e).attr('data-method')) === 'undefined' || $(e).attr('data-method') === 'GET') {\n            req.send();\n        } else if ($(e).attr('data-method') === 'POST') {\n            req.post();\n        }\n    },\n    submit: function() { // @TODO: control submitting form\n        var self = this;\n        var form = self.container.body().find('form');\n\n        if (bow.utils.isPluginLoaded('validator')) {\n            form.trigger('validation.before');\n            form.validator('validate');\n            form.trigger('validation.after');\n            if (form.find('.has-error').length > 0) {\n                return false;\n            }\n        }\n\n        if (typeof (self.container.id.attr('data-progress')) !== 'undefined') {\n            return false;\n        }\n        self.container.id.attr('data-progress', 1);\n\n        var data = bow.form.getInputs(form);\n        var url  = $(form).attr('action');\n        self.loading();\n\n        bow.request.make(url, data, {'Application-Context': 'modal'})\n            .onSuccess(function(content) {\n                self.loading(false);\n                if (content !== '') {\n                    self.container.body(content);\n                    self.container.bind();\n                }\n                self.container.id.trigger('request.completed');\n            })\n            .onError(function(response) {\n                self.loading(false);\n                var contentType = response.getResponseHeader('Content-Type');\n                if (contentType === 'application/json') {\n                    // content = $.parseJSON(response.responseText);\n                    // It should be an error from validation, try to load it again\n                    self.load(self.queue.pop());\n                }\n                self.container.id.trigger('request.completed');\n                bow.ready.clear();\n            })\n            .post();\n    },\n    show: function() { // @TODO: show modal\n        this.container.id.modal('show');\n    },\n    hide: function() { // @TODO: hide modal\n        this.container.id.modal('hide');\n    }\n};\n\nbow.ready = {\n    data: [],\n    add: function(func) {\n        this.data.push(func);\n    },\n    clear: function() {\n        this.data = [];\n    },\n    run: function() {\n        if (this.data.length) {\n            var callback;\n            do {\n                callback = this.data.pop();\n                if (typeof(callback) === 'function') {\n                    callback();\n                }\n            } while(this.data.length > 0);\n        }\n    }\n};\n\nbow.include = {\n    js: function(url, onComplete, onError) {\n        if (url === '') {\n            return false;\n        }\n        var scripts = document.getElementsByTagName('script');\n        if (scripts.length) {\n            var src = '';\n            for (var i = 0; i < scripts.length; i++) {\n                if (typeof (scripts[i].src) !== 'undefined') {\n                    src = scripts[i].src;\n                    if (src !== '') {\n                        if (src === url) {\n                            $(scripts[i]).remove();\n                        }\n                    }\n                }\n            }\n        }\n        url = url.replace('http://', 'https:' == document.location.protocol ? 'https://' : 'http://');\n        var el = document.createElement('script');\n        el.type = 'text/javascript';\n        el.async = true;\n        el.src = url;\n        if (typeof(onComplete) === 'undefined') {\n            onComplete = function() {\n                bow.ready.run();\n            };\n        }\n        el.onload = onComplete;\n        if (typeof(onError) === 'function') {\n            el.onerror = onError;\n        }\n        var s = document.getElementsByTagName('script')[0];\n        s.parentNode.insertBefore(el, s);\n        return true;\n    },\n    css: function(url, media, onComplete, onError) {\n        if (url === '') {\n            return false;\n        }\n        if (typeof(media) === 'undefined') {\n            media = 'screen';\n        }\n        var scripts = document.getElementsByTagName('link');\n        if (scripts.length) {\n            var src = '';\n            for (var i = 0; i < scripts.length; i++) {\n                if (typeof (scripts[i].href) !== 'undefined') {\n                    src = scripts[i].href;\n                    if (src !== '') {\n                        if (src === url) {\n                            if (typeof(onComplete) === 'function') {\n                                onComplete();\n                            }\n                            return false;\n                        }\n                    }\n                }\n            }\n        }\n        url = url.replace('http://', 'https:' == document.location.protocol ? 'https://' : 'http://');\n        var el = document.createElement('link');\n        el.rel = 'stylesheet';\n        el.type = 'text/css';\n        el.media = media;\n        el.href = url;\n        if (typeof(onComplete) === 'function') {\n            el.onload = onComplete;\n        }\n        if (typeof(onError) === 'function') {\n            el.onerror = onError;\n        }\n        var s = document.getElementsByTagName('link')[0];\n        s.parentNode.insertBefore(el, s);\n    }\n};\n\nbow.input = {\n    patterns: {\n        integerKeyCodes: [\n            8, // Backspace\n            [37, 40], // Up, Down, Left, Right arrows\n            46, // Delete\n            [48, 57], // 0-9\n            [96, 105], // 0-9 (number pad)\n\n            9, // Tab\n            20, // Caps Lock\n            16, // Shift\n            17, // Ctrl\n            92, // #\n            192, // ~\n            27, // Esc\n            231 // Special Key (Fired When Number)\n        ],\n\n        floatKeyCodes: [\n            8, // Backspace\n            [37, 40], // Up, Down, Left, Right arrows\n            46, // Delete\n            [48, 57], // 0-9\n            [96, 105], // 0-9 (number pad)\n\n            9, // Tab\n            20, // Caps Lock\n            16, // Shift\n            17, // Ctrl\n            92, // #\n            192, // ~\n            27, // Esc\n            231 // Special Key (Fired When Number)\n\n            ,\n            // IntegerKeyCodes plus:\n            110, // dot\n            190, // dot\n        ]\n    },\n\n    isValid: function(options) {\n        if (typeof(options.type) === 'undefined') {\n            return false;\n        }\n\n        var type = options.type;\n        if (typeof(options.keyCode) !== 'undefined') {\n            var isValid = false;\n            var keyCode = parseInt(options.keyCode);\n            var validKeyCodes;\n            if (type === 'integer') {\n                validKeyCodes = this.patterns.integerKeyCodes;\n            } else if (type === 'float') {\n                validKeyCodes = this.patterns.floatKeyCodes;\n            }\n            $.each(validKeyCodes, function(i, item) {\n                if (typeof(item) === 'number' && keyCode === item) {\n                    isValid = true;\n                } else if (typeof(item) === 'object') {\n                    if (item.length === 2\n                        && keyCode >= item[0] && keyCode <= item[1]) {\n                        isValid = true;\n                    }\n                }\n            });\n            return isValid;\n        } else if (typeof(options.string) !== 'undefined') {\n            if (type === 'integer') {\n                return !isNaN(parseInt(options.string));\n            } else if (type === 'float') {\n                return !isNaN(parseFloat(options.string));\n            }\n        }\n    },\n\n    isInteger: function(options) {\n        return this.isValid($.extend(options, {type: 'integer'}));\n    },\n\n    isFloat: function(options) {\n        return this.isValid($.extend(options, {type: 'float'}));\n    }\n};\n\nbow.cookie = {\n    config: {\n        path: '/',\n        domain: '',\n        expires: 30,\n        raw: true,\n        json: true\n    },\n\n    get: function(key, def) {\n        var value = $.cookie(key);\n        if (typeof(value) === 'undefined' && typeof(def) !== 'undefined') {\n            return def;\n        }\n        return value;\n    },\n\n    set: function(key, value, config) {\n        if (typeof(config) !== 'undefined') {\n            config = $.extend(this.config, config);\n        } else {\n            config = this.config;\n        }\n        return $.cookie(key, value, config);\n    },\n\n    remove: function(key, config) {\n        if (typeof(config) !== 'undefined') {\n            config = $.extend(this.config, config);\n        } else {\n            config = this.config;\n        }\n        return $.removeCookie(key, config);\n    },\n\n    ready: function() {\n        // configure cookie\n        this.config.domain = location.domain;\n    }\n};\n\nbow.utils = {\n    typeHead: {\n        getEngine: function(data, display, value, callback) {\n            if (typeof(Bloodhound) === 'undefined') return null;\n            return new Bloodhound({\n                datumTokenizer: function(o) {\n                    if (typeof(display) !== 'undefined') {\n                        return Bloodhound.tokenizers.whitespace(o[display]);\n                    }\n                    return null;\n                },\n                queryTokenizer: Bloodhound.tokenizers.whitespace,\n                local: data,\n                identify: function(o) {\n                    if (typeof(callback) === 'function') {\n                        return callback(o);\n                    }\n                    var id = 'id';\n                    if (typeof(value) !== 'undefined') {\n                        id = value;\n                    }\n                    return typeof(o[id]) !== 'undefined' ? o[id] : null;\n                }\n            });\n        }\n    },\n\n    isPluginLoaded: function(name) {\n        return typeof(jQuery(document)[name]) === 'undefined' ? false : true;\n    }\n};\n\nbow.url = {\n    config: {\n        base_url: ''\n    },\n\n    make: function(url, options) {\n        return this.config.base_url + url + (typeof(options) === 'undefined' ? '' : this.build(options));\n    },\n\n    build: function(o, p) {\n        var q = typeof(p) === 'undefined' ? '?' : p;\n        $.each(o, function(k, v) {\n            if (typeof(v) === 'object') {\n                $.each(v, function(i, e) {\n                    q += (q === '?' ? '' : '&') + k + '[' + i + ']' + '=' + e;\n                });\n            } else {\n                q += (q === '?' ? '' : '&') + k + '=' + v;\n            }\n        });\n        return q;\n    },\n\n    ready: function() {\n        this.config.base_url = \"/\"\n    }\n};\n\nbow.window = {\n    open: function(u, o) {\n        var n = typeof(o.name) === 'undefined' ? '' : o.name,\n            r = typeof(o.replace) === 'undefined' ? false : o.replace,\n            o = bow.url.build(o, '');\n        window.open(u, n, o, r);\n    },\n    openNewWindow: function(u, o) {\n        return this.open(u, $.extend(o, {name: '_blank'}));\n    },\n    openParentWindow: function(u, o) {\n        return this.open(u, $.extend(o, {name: '_parent'}));\n    },\n    openCurrentWindow: function(u, o) {\n        return this.open(u, $.extend(o, {name: '_self'}));\n    },\n    openNewTab: function(u, o) {\n        var id = 'a__' + Math.round(Math.random() * 10000),\n            a = jQuery('<a/>', {\n                href: u,\n                target: '_blank',\n                id: id\n            }).appendTo($(document.body));\n        document.getElementById(id).click();\n        a.remove();\n    }\n}\n\nbow.ready.add(function() {\n    bow.url.ready();\n    bow.modal.ready();\n    bow.cookie.ready();\n});\n"]}