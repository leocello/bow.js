var bow={};bow.request={res:null,token:null,make:function(a,b,c){return this.res={url:null,method:"GET",headers:{},data:{},complete:null,success:null,error:null,format:"html",response:null},"undefined"!=typeof a&&this.setUrl(a),"undefined"!=typeof b&&this.setData(b),"undefined"!=typeof c&&this.setHeaders(c),this},setFormat:function(a){return this.res.format=a,this},getFormat:function(){return this.res.format},setMethod:function(a){return"undefined"==typeof a&&(a="GET"),this.res.method=a,this},getMethod:function(){return this.res.method},setUrl:function(a){return this.res.url=a,this},getUrl:function(){return this.res.url},addHeader:function(a,b){return this.res.headers[a]=b,this},removeHeader:function(a){return this.res.headers[a]=null,this},hasHeader:function(a){return"undefined"!=typeof this.res.headers[a]},setHeaders:function(a,b){return"undefined"==typeof b&&(b=!1),this.res.headers=b?$.extend(this.res.headers,a):a,this},removeHeaders:function(){return this.res.headers={},this},setData:function(a){return this.res.data=a,this},getData:function(){return this.res.data},setResponse:function(a){this.res.response=a},getResponse:function(){return this.res.response},getJsonResponse:function(){return $.parseJSON(this.res.response.responseText)},onComplete:function(a){return this.res.complete=a,this},onSuccess:function(a){return this.res.success=a,this},onError:function(a){return this.res.error=a,this},post:function(){return("undefined"==typeof this.res.data||null===this.res.data)&&(this.res.data={}),"undefined"==typeof this.res.data._token&&(this.res.data._token=this.token),this.setMethod("POST"),this.send()},send:function(){var self=this;self.hasHeader("Application-Context")||self.addHeader("Application-Context","ajax"),$.ajax({url:self.getUrl(),beforeSend:function(a){"object"==typeof self.res.headers&&$.each(self.res.headers,function(b,c){a.setRequestHeader(b,c)})},type:self.getMethod(),data:self.getData(),dataType:self.getFormat(),success:function(a,b,c){self.res.response=c,self.res.success&&("application/json"===self.getResponse().getResponseHeader("Content-Type")&&(a=""),self.res.success(a,b,c)),c.getResponseHeader("__callback__")&&eval(c.getResponseHeader("__callback__")),bow.ready.run()},error:function(a,b,c){self.res.error&&self.res.error(a,b,c)},complete:function(a,b){self.res.complete&&self.res.complete(a,b)}})},run:function(a){var b=$(a).attr("data-href");if("undefined"==typeof b)return!1;var c,d={},e={};$(a).each(function(){$.each(this.attributes,function(){if(this.specified){if(c=this.name.match(/^data-value-(.*)$/i),c&&2===c.length)return void(d[c[1]]=this.value);if(c=this.name.match(/^data-header-(.*)$/i),c&&2===c.length)return void(e[c[1]]=this.value)}})});var f=bow.request.make(b,d,e);f.onComplete(function(){window.location=window.location.href});var g=$(a).attr("data-method");"undefined"!=typeof g&&"POST"===g?f.post():f.send()}},bow.form={getInputs:function(a){var b,c=$(a).find(":input"),d={};return $.each(c,function(a,c){"undefined"!=typeof $(c).attr("name")&&(b=$(c).attr("name"),"undefined"!=typeof d[b]?"object"==typeof d[b]?d[b].push($(c).val()):d[b]=[d[b],$(c).val()]:d[b]=$(c).val())}),d}},bow.modal={queue:[],container:{id:null,res:{title:null,body:null,loading:null,footer:null},ready:function(){this.res.title=this.title(),this.res.body=this.body(),this.res.loading=this.id.find(".modal-loading"),this.res.footer=this.footer()},body:function(a){return"undefined"!=typeof a&&this.body().html(a),this.id.find(".modal-body")},title:function(a){return"undefined"!=typeof a&&this.title().html(a),this.id.find(".modal-title")},footer:function(a){return"undefined"!=typeof a&&this.footer().html(a),this.id.find(".modal-footer")},bind:function(){var a=bow.modal;this.body().find("form").submit(function(){return a.submit(),!1}),this.id.find(".btn-save").click(function(){return a.submit(),!1})},unbind:function(){this.body().find("form").unbind("submit"),this.id.find(".btn-save").unbind("click")}},ready:function(){var a=this;a.container.id=$("#mainModal"),a.reset(),a.container.id.modal({show:!1}),a.container.ready(),a.bind()},bind:function(){var a=this;a.container.id.on("hidden.bs.modal",function(){a.queue=[],a.reset()}),a.container.id.on("request.completed",function(){a.container.id.removeAttr("data-progress")}),$('[data-toggle="bow"]').click(function(){a.open(this)})},on:function(a,b){return null===this.container.id?!1:void this.container.id.on(a,b)},open:function(a){var b=this;b.queue.push(a);var c=$(a).attr("data-href");if(""!==c){if("undefined"!=typeof b.container.id.attr("data-progress"))return!1;b.container.id.attr("data-progress",1),"undefined"!=typeof $(a).attr("data-size")&&b.container.id.find(".modal-dialog").addClass($(a).attr("data-size")),"undefined"!=typeof $(a).attr("data-class")&&b.container.id.find(".modal-dialog").addClass($(a).attr("data-class")),"undefined"!=typeof $(a).attr("data-style")&&b.container.id.find(".modal-dialog").css($(a).attr("data-style")),"undefined"!=typeof $(a).attr("data-btn-save")&&b.container.id.find(".btn-save").text($(a).attr("data-btn-save")),b.load(a)}},reset:function(){this.container.id.html($("#frmGlobalModal").html()),this.container.unbind(),this.container.bind()},loading:function(a){var b=this;return(a="undefined"==typeof a?!0:!1)?(b.container.id.modal("show"),b.container.footer().hide(),b.container.body(b.container.id.find(".modal-loading").html()),void bow.ready.add(function(){var a=b.container.body().find(".extend-modal-footer");a.length&&(b.container.footer().find(".modal-footer-extra").html(a.html()),a.remove(),b.container.id.trigger("modal.footer.extended"));var c=b.container.body().find(".replace-modal-footer");c.length&&(b.container.footer().html(c.html()),c.remove(),b.container.id.trigger("modal.footer.replaced"));var d=b.container.body().find(".replace-modal-title");d.length&&(b.container.title(d.html()),d.remove(),b.container.id.trigger("modal.title.replaced")),bow.utils.isPluginLoaded("validator")&&b.container.body().find("form").validator().on("invalid.bs.validator",function(a){$(a.relatedTarget).parent().addClass("has-error")}).on("valid.bs.validator",function(a){$(a.relatedTarget).parent().removeClass("has-error")}),b.container.id.trigger("modal.ready")})):(b.container.footer().show(),b.container.body(""),!1)},load:function(a){var b=this;b.loading(),"undefined"!=typeof $(a).attr("data-title")&&b.container.title($(a).attr("data-title"));var c=$(a).attr("data-href"),d=bow.request.make(c,{},{"Application-Context":"modal"}).onSuccess(function(a){b.loading(!1),""!==a&&(b.container.body(a),b.container.bind()),b.container.id.trigger("request.completed")});"undefined"==typeof $(a).attr("data-method")||"GET"===$(a).attr("data-method")?d.send():"POST"===$(a).attr("data-method")&&d.post()},submit:function(){var a=this,b=a.container.body().find("form");if(bow.utils.isPluginLoaded("validator")&&(b.trigger("validation.before"),b.validator("validate"),b.trigger("validation.after"),b.find(".has-error").length>0))return!1;if("undefined"!=typeof a.container.id.attr("data-progress"))return!1;a.container.id.attr("data-progress",1);var c=bow.form.getInputs(b),d=$(b).attr("action");a.loading(),bow.request.make(d,c,{"Application-Context":"modal"}).onSuccess(function(b){a.loading(!1),""!==b&&(a.container.body(b),a.container.bind()),a.container.id.trigger("request.completed")}).onError(function(b){a.loading(!1);var c=b.getResponseHeader("Content-Type");"application/json"===c&&a.load(a.queue.pop()),a.container.id.trigger("request.completed"),bow.ready.clear()}).post()},show:function(){this.container.id.modal("show")},hide:function(){this.container.id.modal("hide")}},bow.ready={data:[],add:function(a){this.data.push(a)},clear:function(){this.data=[]},run:function(){if(this.data.length){var a;do a=this.data.pop(),"function"==typeof a&&a();while(this.data.length>0)}}},bow.include={js:function(a,b,c){if(""===a)return!1;var d=document.getElementsByTagName("script");if(d.length)for(var e="",f=0;f<d.length;f++)"undefined"!=typeof d[f].src&&(e=d[f].src,""!==e&&e===a&&$(d[f]).remove());a=a.replace("http://","https:"==document.location.protocol?"https://":"http://");var g=document.createElement("script");g.type="text/javascript",g.async=!0,g.src=a,"undefined"==typeof b&&(b=function(){bow.ready.run()}),g.onload=b,"function"==typeof c&&(g.onerror=c);var h=document.getElementsByTagName("script")[0];return h.parentNode.insertBefore(g,h),!0},css:function(a,b,c,d){if(""===a)return!1;"undefined"==typeof b&&(b="screen");var e=document.getElementsByTagName("link");if(e.length)for(var f="",g=0;g<e.length;g++)if("undefined"!=typeof e[g].href&&(f=e[g].href,""!==f&&f===a))return"function"==typeof c&&c(),!1;a=a.replace("http://","https:"==document.location.protocol?"https://":"http://");var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.media=b,h.href=a,"function"==typeof c&&(h.onload=c),"function"==typeof d&&(h.onerror=d);var i=document.getElementsByTagName("link")[0];i.parentNode.insertBefore(h,i)}},bow.input={patterns:{integerKeyCodes:[8,[37,40],46,[48,57],[96,105],9,20,16,17,92,192,27,231],floatKeyCodes:[8,[37,40],46,[48,57],[96,105],9,20,16,17,92,192,27,231,110,190]},isValid:function(a){if("undefined"==typeof a.type)return!1;var b=a.type;if("undefined"!=typeof a.keyCode){var c,d=!1,e=parseInt(a.keyCode);return"integer"===b?c=this.patterns.integerKeyCodes:"float"===b&&(c=this.patterns.floatKeyCodes),$.each(c,function(a,b){"number"==typeof b&&e===b?d=!0:"object"==typeof b&&2===b.length&&e>=b[0]&&e<=b[1]&&(d=!0)}),d}if("undefined"!=typeof a.string){if("integer"===b)return!isNaN(parseInt(a.string));if("float"===b)return!isNaN(parseFloat(a.string))}},isInteger:function(a){return this.isValid($.extend(a,{type:"integer"}))},isFloat:function(a){return this.isValid($.extend(a,{type:"float"}))}},bow.cookie={config:{path:"/",domain:"",expires:30,raw:!0,json:!0},get:function(a,b){var c=$.cookie(a);return"undefined"==typeof c&&"undefined"!=typeof b?b:c},set:function(a,b,c){return c="undefined"!=typeof c?$.extend(this.config,c):this.config,$.cookie(a,b,c)},remove:function(a,b){return b="undefined"!=typeof b?$.extend(this.config,b):this.config,$.removeCookie(a,b)},ready:function(){this.config.domain=location.domain}},bow.utils={typeHead:{getEngine:function(a,b,c,d){return"undefined"==typeof Bloodhound?null:new Bloodhound({datumTokenizer:function(a){return"undefined"!=typeof b?Bloodhound.tokenizers.whitespace(a[b]):null},queryTokenizer:Bloodhound.tokenizers.whitespace,local:a,identify:function(a){if("function"==typeof d)return d(a);var b="id";return"undefined"!=typeof c&&(b=c),"undefined"!=typeof a[b]?a[b]:null}})}},isPluginLoaded:function(a){return"undefined"==typeof jQuery(document)[a]?!1:!0}},bow.url={config:{base_url:""},make:function(a,b){return this.config.base_url+a+("undefined"==typeof b?"":this.build(b))},build:function(a,b){var c="undefined"==typeof b?"?":b;return $.each(a,function(a,b){"object"==typeof b?$.each(b,function(b,d){c+=("?"===c?"":"&")+a+"["+b+"]="+d}):c+=("?"===c?"":"&")+a+"="+b}),c},ready:function(){this.config.base_url="/"}},bow.window={open:function(a,b){var c="undefined"==typeof b.name?"":b.name,d="undefined"==typeof b.replace?!1:b.replace,b=bow.url.build(b,"");window.open(a,c,b,d)},openNewWindow:function(a,b){return this.open(a,$.extend(b,{name:"_blank"}))},openParentWindow:function(a,b){return this.open(a,$.extend(b,{name:"_parent"}))},openCurrentWindow:function(a,b){return this.open(a,$.extend(b,{name:"_self"}))},openNewTab:function(a){var b="a__"+Math.round(1e4*Math.random()),c=jQuery("<a/>",{href:a,target:"_blank",id:b}).appendTo($(document.body));document.getElementById(b).click(),c.remove()}},bow.ready.add(function(){bow.url.ready(),bow.modal.ready(),bow.cookie.ready()});
//# sourceMappingURL=bow.min.js.map